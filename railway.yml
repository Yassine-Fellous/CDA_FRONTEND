# Configuration Railway pour SportMap Frontend avec Docker
version: 2

# Utiliser Docker au lieu de Nixpacks
build:
  # Railway détectera automatiquement le Dockerfile
  dockerfile: Dockerfile

# Configuration du déploiement
deploy:
  # Le conteneur expose le port 80
  port: 80
  # Health check
  healthcheck:
    path: /health
    timeout: 30
    interval: 10

# Variables d'environnement
environments:
  production:
    # Variables Vite (injectées au build time)
    VITE_MAPBOX_TOKEN: $VITE_MAPBOX_TOKEN
    VITE_API_URL: $VITE_API_URL
    VITE_ENABLE_MOCK: false
    NODE_ENV: production

# Configuration des ressources
resources:
  memory: 512Mi
  cpu: 500m